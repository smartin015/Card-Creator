<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Expedition Card Generator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <link href='css/main.css' rel='stylesheet' type='text/css'>
    <link href='css/print.css' rel='stylesheet' type='text/css' media="print">
  </head>

  <body>
    <div id="loading" style="color: white; font-size: 24px;">LOADING....</div>

    <header id="topbar" style="margin-bottom: 0.1in;">
      <a href="http://expeditiongame.com" target="_blank">
        <img id="logo" src="img/logo.png" />
      </a>
      <div id="filters">
        <button id="resetFilters">Reset Filters</button>
      </div>
    </header>

    <div id="printInstructions">
      <img id="instructionLogo" src="img/logo.png" />
      <h1>The adventurer's guide to printing</h1>
      <ol>
        <li>Download this PDF and take it to your local print shop.</li>
        <li>Have it printed on heavy white cardstock (usually 80-pound or heavier). Although the cards are black and white, you'll get nicer results on a color printer.</li>
        <li>Cut the cards using a paper cutter. The more precise you are, the easier they'll be to handle later.</li>
        <li>Secure your cards with a small box or rubber band, and prepare to adventure!</li>
      </ol>
    </div>

    <script id="intro-template" type="text/x-handlebars-template">
      <div class="card front {{{ cardType }}}">
        <header>
          <div class="title">{{{ Header }}}</div>
        </header>
        <article>
          <div class="info">{{{ Body }}}</div>
        </article>
      </div>
    </script>

    <script id="explorer-template" type="text/x-handlebars-template">
      <div class="card front {{{ cardType }}}">
        <header>
          <div class="indicators">
            <div class="health">{{{ Health }}}{{> icon img='hp' }}</div>
          </div>
          <div class="title fillIn">__________</div>
        </header>
        <article>
          <div class="info">{{{ Title }}}</div>
          <div class="portrait">
            Gold:</br>
            Inventory:
          </div>
          <div class="skills"><strong>Skills:</strong> {{{ Skills }}}</div>
        </article>
        {{> footer }}
      </div>
    </script>

    <script id="encounter-template" type="text/x-handlebars-template">
      <div class="card front {{{ cardType }}}">
        <header>
          <div class="indicators">
            <div class="health">{{{ Health }}}{{> icon img='hp' }}</div>
            <div class="threat bottom">{{romanize Threat }}</div>
          </div>
          <div class="title">{{{ Title }}}</div>
        </header>
        <article>
          {{#if Ongoing}}
            <div class="info ongoing">{{{ Ongoing }}}</div>
          {{/if}}
          {{#if Surge}}
            <div class="surge"><strong>Surge: </strong>{{{ Surge }}}</div>
          {{/if}}
          <div class="description">{{{ Description }}}</div>
        </article>
        {{> footer }}
      </div>
    </script>

    <script id="trap-template" type="text/x-handlebars-template">
      <div class="card front {{{ cardType }}}">
        <header>
          <div class="indicators">
            <div class="threat">{{romanize Threat }}</div>
          </div>
          <div class="title">{{{ Title }}}</div>
        </header>
        <article>
          <div class="effect">{{{ Effect }}}</div>
          <div class="description">{{{ Description }}}</div>
        </article>
        {{> footer }}
      </div>
    </script>

    <script id="modifier-template" type="text/x-handlebars-template">
      <div class="card front {{{ cardType }}}">
        <header>
          {{> passiveIndicators showThreat='true' }}
          <div class="title">{{{ Title }}}</div>
        </header>
        <article>
          {{#if Immune}}
            <div class="info">Immune to <span class="immune">{{{ Immune }}}</span></div>
          {{/if}}
          {{#if Effect}}
            <div class="effect">{{{ Effect }}}</div>
            <div class="description">{{{ Description }}}</div>
          {{/if}}
        </article>
        {{> footer }}
      </div>
    </script>

    <script id="ability-template" type="text/x-handlebars-template">
      <div class="card front {{{ cardType }}} {{{ Class }}}">
        <header>
          <div class="indicators">
            <div class="top">
              {{#if Defense }}
                <div class="defense">{{{ Defense }}}{{> icon img='defense' }}</div>
              {{else}}{{#if Damage }}
                <div class="damage">{{{ Damage }}}{{> icon img='damage' }}</div>
              {{else}}
                <div>{{default Damage "-" }}</div>
              {{/if}}{{/if}}
            </div>
            <div class="bottom risk">{{default Risk "-" }}</div>
          </div>
          <div class="title">{{{ Title }}}</div>
        </header>
        <article>
          <div class="info">
            {{#if Type}}<div class="type">{{{ Type }}}</div>{{/if}}
            <div class="target">{{target Target }}</div>
          </div>
          <div class="usage">{{{ Usage }}}</div>
          <div class="effect">{{{ Effect }}}</div>
          <div class="description">{{{ Description }}}</div>
        </article>
        {{> footer }}
      </div>
    </script>

    <script id="title-template" type="text/x-handlebars-template">
      <div class="card front {{{ cardType }}}">
        <header>
          <div class="title fillIn">_____________</div>
        </header>
        <article>
          <div class="passive">{{{ Passive }}}</div>
          <div class="active">Destroy this card to:<br/>{{{ Active }}}</div>
        </article>
        {{> footer }}
      </div>
    </script>

    <script id="equipment-template" type="text/x-handlebars-template">
      <div class="card front {{{ cardType }}} {{{ Class }}}">
        <header>
          <div class="title">{{{ Title }}}</div>
        </header>
        <article>
          <div class="effect">{{{ Effect }}}</div>
        </article>
        {{> footer }}
      </div>
    </script>

    <script id="loot-template" type="text/x-handlebars-template">
      <div class="card front {{{ cardType }}}">
        <header>
          <div class="title">{{{ Title }}}</div>
        </header>
        <article>
          <div class="type">{{{ Type }}}</div>
          <div class="effect">{{{ Effect }}}</div>
          <div class="description">{{{ Description }}}</div>
        </article>
        {{> footer }}
      </div>
    </script>



    <script id="back-template" type="text/x-handlebars-template">
      <div class="card back {{{ Class }}} {{{ cardType }}}">
        <div class="cardType">
          {{#if Environment }}{{Environment}}{{else}}
          {{#is cardType 'Equipment' }}Loot{{else}}
          {{#is cardType 'Ability' }}{{{ Class }}}{{else}}
            {{{ cardType }}}
          {{/is}}{{/is}}{{/if}}
        </div>
        {{#if Threat }}<div class="threat aux">{{romanize Threat }}</div>{{/if}}
        {{#is cardType 'Ability' }}<div class="aux">Ability</div>{{/is}}
        <footer>
          {{#if Environment }}<div class="environment">{{{ cardType }}}</div>{{/if}}
        </footer>
      </div>
    </script>



    <script id="passive-indicator-partial" type="text/x-handlebars-template">
      <div class="indicators">
        {{#if Health}}
          <div class="health">{{#gt Health 0}}+{{/gt}}{{{ Health }}}{{> icon img='hp' }}</div>
        {{else}}{{#if Bonus }}
          <div class="bonus">+{{{ Bonus }}}{{> classIcon }}</div>
        {{else}}
          <div class="bonus">-</div>
        {{/if}}{{/if}}
        {{#if showThreat }}
          <div class="threat bottom">{{romanize Threat }}</div>
        {{/if}}
      </div>
    </script>

    <script id="footer-partial" type="text/x-handlebars-template">
      <footer>
        <div class="slot">
          {{#if Heavy}}<div class="heavy">heavy</div>{{/if}}
          {{#if Slot }}{{{ Slot }}}{{/if}}
        </div>
        <div class="cardType">
          {{#is cardType 'Ability' }}{{{ Class }}}{{/is}}
          {{{ cardType }}}
        </div>
        {{#if Worth}}
          <div class="worth">
            {{#gt Worth 0 }}<span>{{digitGrouping Worth }} gold</span>
            {{else}}no value{{/gt}}
          </div>
        {{/if}}
      </footer>
    </script>

    <script id="icon-partial" type="text/x-handlebars-template">
      <div class="icon"><img class="svg" src="img/{{ img }}.svg"/></div>
    </script>
    <script id="class-icon-partial" type="text/x-handlebars-template">
      <div class="icon"><img class="svg" src="img/class/{{ Class }}.svg"/></div>
    </script>

    

    

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="js/jquery.query.js"></script>
    <script src="js/handlebars.js"></script>
    <script src="js/handlebars.swag.js"></script>
    <script src="js/tabletop.js"></script>
    <script src="js/svg.js"></script>
    <script src="js/generate.js"></script>
    <!--<script>document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')</script>
    Breaks when deployed to S3 -->
  </body>
</html>