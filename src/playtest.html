<!DOCTYPE html>
<html>
  <head>
    <meta charset=utf-8>
    <title>Expedition</title>
    <style>
      body { margin: 0; }
      canvas { width: 100%; height: 100% }
    </style>
    <link href='https://fonts.googleapis.com/css?family=Permanent+Marker' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="css/cards.css">
    <link rel="stylesheet" href="css/playtest.css">
  </head>
  <body>
    <div id="overlay">
      <div id="loading" style="color: white; font-size: 24px;">
        <img src="img/logo.svg"></img>
        <div>Loading...</div>
      </div>

      <div id="center">
          <div id="textLog" class="transparent"></div>
          <br/>
          <span id="helpText" class="transparent"></span>
        </div>
            <div id="abilities"></div>
            <div id="encounter"></div>
            <div id="healthCounter"></div>
            <div id="endgameButtons" style="display:none"><a href="/index.html"><button>Continue your Quest</button></a></div>
            <a id="skip" href="http://www.expeditiongame.com">Skip</a>
    </div>
      <div id="canvas"></div>

      <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.transit/0.9.12/jquery.transit.min.js"></script>

      <!-- For card generation -->
      <script src="js/handlebars.js"></script>
      <script src="js/handlebars.swag.js"></script>
      <script src="js/templates.js"></script>
      <script src="js/partials.js"></script>
      <script src="js/tabletop.js"></script>
      <script src="js/svg.js"></script>
      <script src="js/cards.js"></script>

      <!-- Game and 3D/physics engines -->
      <script type="text/javascript" src="js/demo/three.min.js"></script>
      <script type="text/javascript" src="js/demo/cannon.min.js"></script>
      <script type="text/javascript" src="js/demo/modifiers.js"></script>
      <script type="text/javascript" src="js/demo/encounters.js"></script>
      <script type="text/javascript" src="js/demo/player.js"></script>
      <script type="text/javascript" src="js/demo/abilities.js"></script>
      <script type="text/javascript" src="js/demo/random.js"></script>
      <script type="text/javascript" src="js/demo/ui.js"></script>
      <script type="text/javascript" src="js/demo/game.js"></script>
    <script type="text/javascript" src="js/demo/dice.js"></script>
      <script type="text/javascript" src="js/demo/world.js"></script>
      
    <script>
      var world = null;
      var game = null;

      (function init() {
        Tabletop.init({
          key: '1WvRrQUBRSZS6teOcbnCjAqDr-ubUNIxgiVwWGDcsZYM',
          callback: function(d, t) {
            console.log('sheets loaded');

            cardData = d; // save these in case we need them later (ie re-running rendering)
            tabletop = t;
            sheets = tabletop.sheets();

            // assert load worked
            for (var page in templates) {
              if (!sheets[page]) {
                return alert('Failed to sheet: ' + page);
              }
              if (sheets[page].elements.length <= 1) {
                return alert('No cards loaded for: ' + page);
              }
            }

            $("#loading").transition({ opacity: 0 }, function() {
              var canvas = document.getElementById('canvas');
              world = new World(canvas);
              game = new Game();
              game.stateStart();
            });

          }, simpleSheet: true
        });
      })();
    </script>
  </body>
</html>